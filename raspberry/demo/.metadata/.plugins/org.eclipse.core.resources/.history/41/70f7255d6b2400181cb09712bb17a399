package bs.pi.gateway.client.port;

import java.io.IOException;
import java.io.OutputStream;
import java.util.HashMap;

import bs.pi.gateway.main.IConverter;
import bs.pi.gateway.main.ISender;

public class PortSender implements ISender {

	private OutputStream oStream;
	private IConverter converter;
	
	public PortSender(OutputStream oStream, IConverter converter){
		this.oStream = oStream;
		this.converter = converter;
	}
	
	@Override
	public String getName() {
		return ISender.V_SEND_NAME_PORT_SNEDER;
	}

	@Override
	public HashMap<String, Object> send(HashMap<String, Object> msg) {
		
		HashMap<String, Object> result = new HashMap<String, Object>();
		result.put(ISender.K_SEND_STATUS, ISender.K_SEND_STATUS_FAIL);
		
		byte[] data = (byte[]) msg.get("data");
		if(data != null && data.length>0){
			try {
				oStream.write(data);
				result.put(ISender.K_SEND_STATUS, ISender.V_SEND_STATUS_SUCCESS);
			} catch (IOException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
				result.put(ISender.K_SEND_STATUS, ISender.K_SEND_STATUS_FAIL);
			}
		}
		
		return result;
	}

}
