package bs.pi.gateway.client.http;

import bs.pi.gateway.main.IClient;
import bs.pi.gateway.main.IConverter;
import bs.pi.gateway.main.IReceiver;
import bs.pi.gateway.main.ISender;
import net.sf.json.JSONObject;

public class HttpClient implements IClient{

	private static final String DEFAULT_CFG_PATH = System.getProperty("user.dir")+System.getProperty("file.separator")+"httpClient.properties";
	private HttpClientCfg cfg;
	private String cfgPath;
	
	public void setCfgPath(String path){
		this.cfgPath = path;
	}
	
	private void loadCfg() throws Exception{
		if(cfgPath == null){
			throw new Exception("cfgPath is null");
		}else{
			cfg = new HttpClientCfg(cfgPath);
		}
	}
	
	public void init() throws Exception{
		loadCfg();
	}
	
	public void start(){
		
	}
	
	public boolean send(JSONObject msg) {
		
		/*
		if(msg == null)
			return false;
		
		if(Msg.CMD_UPLOAD_SENSOR_DATA_TO_HTTP_SERVER.equals( msg.getString(Msg.KEY_CMD_NAME) )){
			String appID = msg.getString("appID");
			String value = msg.getString("value");
			JSONObject jo = new JSONObject();
			String url = cfg.getServiceUrl()+"/device/"+cfg.getDeviceID()+"/sensor/"+appID+"/datapoint";
			jo.put(HttpMsgSender.KEY_URL, url);
			jo.put(HttpMsgSender.KEY_APIKEY, cfg.getApiKey());
			jo.put(HttpMsgSender.KEY_METHOD, HttpMsgSender.METHOD_POST);
			JSONObject params = new JSONObject();
			params.put("value",value);
			jo.put(HttpMsgSender.KEY_PARAMS, params);
			JSONObject response = sender.send(jo);
			if(response != null && response.has("success") && 
					"true".equals(response.getString("success"))){
				return true;
			}
			else{
				return false;
			}
		}else{
			return false;
		}
		
		*/
	}

	@Override
	public void destroy() throws Exception {
		// TODO Auto-generated method stub
		
	}

	@Override
	public void setConverter(IConverter converter) {
		// TODO Auto-generated method stub
		
	}

	@Override
	public ISender getSender() {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public IReceiver getReceiver() {
		// TODO Auto-generated method stub
		return null;
	}
}
